var onSale=false;var soldOut=false;var priceVaries=false;var images=[];var firstVariant={};var bcSfFilterSettings={general:{limit:bcSfFilterConfig.custom.products_per_page,loadProductFirst:true}};
var bcSfFilterTemplate={"soldOutClass":" sold-out","saleClass":" on-sale","soldOutLabelHtml":'<span class="soldout bc-sf-filter-label">'+bcSfFilterConfig.label_basic.sold_out+"</span>","saleLabelHtml":'<span class="sale bc-sf-filter-label">'+bcSfFilterConfig.label_basic.sale+"</span>","tagLabelHtml":'<span class="tag bc-sf-filter-label {{labelTag}}" >{{labelTag}}</span>',"vendorHtml":'<p class="bc-sf-filter-product-item-vendor">{{itemVendorLabel}}</p>',"productGridItemHtml":'<div class="list-item box grid__item small--one-half medium--one-half large--one-quarter {{gridWidthClass}}{{soldOutClass}}{{saleClass}} {{itemActiveSwapClass}}">'+
'<script class="bc-sf-filter-product-script" data-id="bc-product-json-{{itemId}}" type="application/json">{{itemJson}}\x3c/script>'+'<div class="product-grid-item">'+'<span class="grid-link__image ab-grid-link__image--product clearfix">'+'<span class="img grid-link__image-centered">'+'<a href="{{itemUrl}}" class="bc-sf-filter-product-item-image-link">{{itemImages}}</a>'+"</span>"+"</span>"+'<div class="bc-sf-filter-product-item-label">{{itemLabels}}{{itemTagLabels}}</div>'+'<div class="block">'+'<h4><a href="{{itemUrl}}" class="bc-sf-filter-product-item-title">{{itemTitle}}</a></h4>'+
'<div class="prices">'+'<span class="prices-container">'+"{{itemPrice}}"+'<div class="yotpo bottomLine" data-appkey="Z27A76DgfCrjO46QR080KW7KFQubD2Wh2Wso5hUL" data-domain="{{itemDomain}}" data-product-id="{{itemId}}" data-product-models="{{itemId}}" data-name="{{itemTitle}}" data-url="{{itemUrl}}" data-image-url="{{itemThumbUrl}}" data-description="{{itemDescription}}" data-bread-crumbs="{{itemTags}}"> </div>'+"</span>"+'<span class="reviews-container">'+'<div><a href="{{itemUrl}}">{{variantLength}} Options</a></div>'+
'<a href="{{itemUrl}}" class="btn">Shop Now</a>'+"</span>"+"</div>"+"</div>"+"</div>"+"</div>","productListItemHtml":'<div class="bc-sf-filter-product-item bc-sf-filter-product-item-list {{soldOutClass}}{{saleClass}} {{itemActiveSwapClass}}">'+'<div class="bc-sf-filter-product-item-list-col-1">'+'<div class="bc-sf-filter-product-item-image">'+'<div class="bc-sf-filter-product-item-label">{{itemLabels}}{{itemTagLabels}}</div>'+'<a href="{{itemUrl}}" class="bc-sf-filter-product-item-image-link">{{itemImages}}</a>'+
"</div>"+"</div>"+'<div class="bc-sf-filter-product-bottom">'+'<div class="bc-sf-filter-product-item-list-col-2">'+'<a href="{{itemUrl}}" class="bc-sf-filter-product-item-title">{{itemTitle}}</a>'+"{{itemVendor}}"+'<p class="bc-sf-filter-des">{{itemDescription}}</p>'+"</div>"+'<div class="bc-sf-filter-product-item-list-col-3">{{itemPrice}}</div>'+"</div>"+"</div>","previousActiveHtml":'<li><a href="{{itemUrl}}">&larr;</a></li>',"previousDisabledHtml":'<li class="disabled"><span>&larr;</span></li>',
"nextActiveHtml":'<li><a href="{{itemUrl}}">&rarr;</a></li>',"nextDisabledHtml":'<li class="disabled"><span>&rarr;</span></li>',"pageItemHtml":'<li><a href="{{itemUrl}}">{{itemTitle}}</a></li>',"pageItemSelectedHtml":'<li><span class="active">{{itemTitle}}</span></li>',"pageItemRemainHtml":"<li><span>{{itemTitle}}</span></li>","paginateHtml":"<ul>{{previous}}{{pageItems}}{{next}}</ul>","sortingHtml":"<label><span><span>"+bcSfFilterConfig.label.sorting+'</span></span></label><ul class="bc-sf-filter-filter-dropdown">{{sortingItems}}</ul>',
"showLimitHtml":"<label>"+bcSfFilterConfig.label.show_limit+'</label><select class="bc-sf-filter-filter-dropdown">{{showLimitItems}}</select>',"breadcrumbHtml":'<a href="/">'+bcSfFilterConfig.label.breadcrumb_home+"</a> {{breadcrumbDivider}} {{breadcrumbItems}}","breadcrumbDivider":'<span class="divider">/</span>',"breadcrumbItemLink":'<a href="{{itemLink}}">{{itemTitle}}</a>',"breadcrumbItemSelected":"<span>{{itemTitle}}</span>"};
function prepareShopifyData(data){console.log(data);soldOut=!data.available;onSale=data.compare_at_price_min>data.price_min;priceVaries=data.price_min!=data.price_max;images=data.images_info;var firstVariant=data["variants"][0];if(getParam("variant")!==null&&getParam("variant")!=""){var paramVariant=data.variants.filter(function(e){return e.id==getParam("variant")});if(typeof paramVariant[0]!=="undefined")firstVariant=paramVariant[0]}else for(var i=0;i<data["variants"].length;i++)if(data["variants"][i].available){firstVariant=
data["variants"][i];break}return data}
BCSfFilter.prototype.buildProductGridItem=function(data,index){var dataLength=data.variants.length;var dataImage=data.featured_image.src;var itemHtml=bcSfFilterTemplate.productGridItemHtml;data=prepareShopifyData(data);var soldOutClass=soldOut?bcSfFilterTemplate.soldOutClass:"";var saleClass=onSale?bcSfFilterTemplate.saleClass:"";itemHtml=itemHtml.replace(/{{variantLength}}/g,dataLength);itemHtml=itemHtml.replace(/{{soldOutClass}}/g,soldOutClass);itemHtml=itemHtml.replace(/{{saleClass}}/g,saleClass);
itemHtml=itemHtml.replace(/{{gridWidthClass}}/g,buildGridWidthClass(data));itemHtml=itemHtml.replace(/{{itemLabels}}/g,buildLabels(data));itemHtml=itemHtml.replace(/{{itemTagLabels}}/g,buildTagLabels(data,false));itemHtml=itemHtml.replace(/{{itemImages}}/g,buildImages(data));itemHtml=itemHtml.replace(/{{itemThumbUrl}}/g,dataImage);itemHtml=itemHtml.replace(/{{itemPrice}}/g,buildPrice(data));itemHtml=itemHtml.replace(/{{itemVendor}}/g,buildVendor(data));var itemActiveSwapClass=bcSfFilterConfig.custom.active_image_swap?
"has-bc-swap-image":"";itemHtml=itemHtml.replace(/{{itemActiveSwapClass}}/g,itemActiveSwapClass);var self=this;var itemJson={"id":data.id,"title":data.title,"handle":data.handle,"vendor":data.vendor,"variants":data.variants,"url":self.buildProductItemUrl(data),"options_with_values":data.options_with_values,"images":data.images,"available":data.available,"price_min":data.price_min,"price_max":data.price_max,"compare_at_price_min":data.compare_at_price_min,"compare_at_price_max":data.compare_at_price_max};
itemHtml=itemHtml.replace(/{{itemJson}}/g,JSON.stringify(itemJson));itemHtml=itemHtml.replace(/{{itemDomain}}/g,this.escape(bcSfFilterConfig.shop.domain));var itemDescription=data.description;itemDescription=itemDescription.substr(0,itemDescription.indexOf("##highlights##"));itemHtml=itemHtml.replace(/{{itemDescription}}/g,itemDescription);itemHtml=itemHtml.replace(/{{itemTags}}/g,this.escape(data.tags.join(";")));itemHtml=itemHtml.replace(/{{itemId}}/g,data.id);itemHtml=itemHtml.replace(/{{itemTitle}}/g,
data.title);itemHtml=itemHtml.replace(/{{itemHandle}}/g,data.handle);itemHtml=itemHtml.replace(/{{itemVendorLabel}}/g,data.vendor);itemHtml=itemHtml.replace(/{{itemUrl}}/g,this.buildProductItemUrl(data));return itemHtml};
BCSfFilter.prototype.buildProductListItem=function(data){var images=data.images_info;var soldOut=!data.available;var onSale=data.compare_at_price_min>data.price_min;var priceVaries=data.price_min!=data.price_max;var firstVariant=data["variants"][0];if(getParam("variant")!==null&&getParam("variant")!=""){var paramVariant=data.variants.filter(function(e){return e.id==getParam("variant")});if(typeof paramVariant[0]!=="undefined")firstVariant=paramVariant[0]}else for(var i=0;i<data["variants"].length;i++)if(data["variants"][i].available){firstVariant=
data["variants"][i];break}var itemHtml=bcSfFilterTemplate.productListItemHtml;data=prepareShopifyData(data);var soldOutClass=soldOut?bcSfFilterTemplate.soldOutClass:"";var saleClass=onSale?bcSfFilterTemplate.saleClass:"";itemHtml=itemHtml.replace(/{{soldOutClass}}/g,soldOutClass);itemHtml=itemHtml.replace(/{{saleClass}}/g,saleClass);itemHtml=itemHtml.replace(/{{itemLabels}}/g,buildLabels(data));itemHtml=itemHtml.replace(/{{itemTagLabels}}/g,buildTagLabels(data,false));itemHtml=itemHtml.replace(/{{itemImages}}/g,
buildImages(data));itemHtml=itemHtml.replace(/{{itemVendor}}/g,buildVendor(data));var itemPriceHtml=buildPrice(data,onSale,priceVaries);itemHtml=itemHtml.replace(/{{itemPrice}}/g,itemPriceHtml);var itemDescription=jQ("<p>"+data.body_html+"</p>").text();itemDescription=itemDescription.split(" ").length>40?itemDescription.split(" ").splice(0,40).join(" ")+"...":itemDescription.split(" ").splice(0,40).join(" ");itemHtml=itemHtml.replace(/{{itemDescription}}/g,itemDescription);var itemActiveSwapClass=
bcSfFilterConfig.custom.active_image_swap?"has-bc-swap-image":"";itemHtml=itemHtml.replace(/{{itemActiveSwapClass}}/g,itemActiveSwapClass);itemHtml=itemHtml.replace(/{{itemTitle}}/g,data.title);itemHtml=itemHtml.replace(/{{itemVendorLabel}}/g,data.vendor);itemHtml=itemHtml.replace(/{{itemUrl}}/g,this.buildProductItemUrl(data));return itemHtml};
function buildGridWidthClass(){var gridWidthClass="";switch(bcSfFilterConfig.custom.products_per_row){case 2:gridWidthClass="bc-sf-filter-grid-width-2";break;case 3:gridWidthClass="bc-sf-filter-grid-width-3";break;case 5:gridWidthClass="bc-sf-filter-grid-width-5";break;default:gridWidthClass="bc-sf-filter-grid-width-4";break}switch(bcSfFilterConfig.custom.products_per_row_mobile){case 1:gridWidthClass+=" bc-sf-filter-grid-width-mb-1";break;case 3:gridWidthClass+=" bc-sf-filter-grid-width-mb-3";break;
default:gridWidthClass+=" bc-sf-filter-grid-width-mb-2";break}return gridWidthClass}
function buildImages(data){var html="";var thumbUrl=images.length>0?bcsffilter.optimizeImage(images[0]["src"]):bcSfFilterConfig.general.no_image_url;html+='<img src="'+thumbUrl+'" class="bc-sf-filter-product-item-main-image" />';if(bcSfFilterConfig.custom.active_image_swap){var flipImageUrl=images.length>1?bcsffilter.optimizeImage(images[1]["src"]):thumbUrl;html+='<img src="'+flipImageUrl+'" class="bc-sf-filter-product-item-flip-image" />'}return html}
function buildVendor(data){var html="";if(bcSfFilterConfig.custom.show_vendor)html=bcSfFilterTemplate.vendorHtml;return html}function buildPrice(data){var html="";if(bcSfFilterConfig.custom.show_price)if(priceVaries)html+='<div class="price">'+bcsffilter.formatMoney(data.price_min)+"-"+bcsffilter.formatMoney(data.price_max)+"</div>";else html+='<div class="price">'+bcsffilter.formatMoney(data.price_min)+"</div>";return html}
function buildLabels(data){var soldOutLabel="";if(bcSfFilterConfig.custom.show_sold_out_label&&soldOut)soldOutLabel=bcSfFilterTemplate.soldOutLabelHtml.replace(/{{style}}/g,"");var saleLabel="";if(bcSfFilterConfig.custom.show_sale_label&&onSale&&!soldOut)saleLabel=bcSfFilterTemplate.saleLabelHtml.replace(/{{style}}/g,"");return soldOutLabel+saleLabel}
function buildTagLabels(data,showall){if(showall){var tagLabel="";if(data.tags)for(var i=0;i<data.tags.length;i++){var tag=data.tags[i];if(tag.indexOf("pfs:label")!==-1){var preTagLabel=bcSfFilterTemplate.tagLabelHtml.replace(/{{labelTag}}/g,tag.split("pfs:label-")[1]);tagLabel+=preTagLabel}}}else{var tagLabel="";if(data.tags)for(var i=data.tags.length-1;i>=0;i--){tag=data.tags[i];if(tag.indexOf("pfs:label")!==-1){var preTagLabel=bcSfFilterTemplate.tagLabelHtml.replace(/{{labelTag}}/g,tag.split("pfs:label-")[1]);
tagLabel+=preTagLabel;break}}}return tagLabel}
BCSfFilter.prototype.buildPagination=function(totalProduct){var currentPage=parseInt(this.queryParams.page);var totalPage=Math.ceil(totalProduct/this.queryParams.limit);if(totalPage==1){jQ(this.selector.pagination).html("");return false}if(this.getSettingValue("general.paginationType")=="default"){var paginationHtml=bcSfFilterTemplate.paginateHtml;var previousHtml=currentPage>1?bcSfFilterTemplate.previousActiveHtml:bcSfFilterTemplate.previousDisabledHtml;previousHtml=previousHtml.replace(/{{itemUrl}}/g,
this.buildToolbarLink("page",currentPage,currentPage-1));paginationHtml=paginationHtml.replace(/{{previous}}/g,previousHtml);var nextHtml=currentPage<totalPage?bcSfFilterTemplate.nextActiveHtml:bcSfFilterTemplate.nextDisabledHtml;nextHtml=nextHtml.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",currentPage,currentPage+1));paginationHtml=paginationHtml.replace(/{{next}}/g,nextHtml);var beforeCurrentPageArr=[];for(var iBefore=currentPage-1;iBefore>currentPage-3&&iBefore>0;iBefore--)beforeCurrentPageArr.unshift(iBefore);
if(currentPage-4>0)beforeCurrentPageArr.unshift("...");if(currentPage-4>=0)beforeCurrentPageArr.unshift(1);beforeCurrentPageArr.push(currentPage);var afterCurrentPageArr=[];for(var iAfter=currentPage+1;iAfter<currentPage+3&&iAfter<=totalPage;iAfter++)afterCurrentPageArr.push(iAfter);if(currentPage+3<totalPage)afterCurrentPageArr.push("...");if(currentPage+3<=totalPage)afterCurrentPageArr.push(totalPage);var pageItemsHtml="";var pageArr=beforeCurrentPageArr.concat(afterCurrentPageArr);for(var iPage=
0;iPage<pageArr.length;iPage++){if(pageArr[iPage]=="...")pageItemsHtml+=bcSfFilterTemplate.pageItemRemainHtml;else pageItemsHtml+=pageArr[iPage]==currentPage?bcSfFilterTemplate.pageItemSelectedHtml:bcSfFilterTemplate.pageItemHtml;pageItemsHtml=pageItemsHtml.replace(/{{itemTitle}}/g,pageArr[iPage]);pageItemsHtml=pageItemsHtml.replace(/{{itemUrl}}/g,this.buildToolbarLink("page",currentPage,pageArr[iPage]))}paginationHtml=paginationHtml.replace(/{{pageItems}}/g,pageItemsHtml);jQ(this.selector.pagination).html(paginationHtml)}};
BCSfFilter.prototype.buildFilterSorting=function(){if(bcSfFilterConfig.custom.show_sorting&&bcSfFilterTemplate.hasOwnProperty("sortingHtml")){jQ(this.selector.topSorting).html("");var sortingArr=this.getSortingList();if(sortingArr){var paramSort=this.queryParams.sort||"";var sortingItemsHtml="";for(var k in sortingArr){activeClass="";if(paramSort==k)activeClass="active";sortingItemsHtml+='<li><a href="#" data-sort="'+k+'" class="'+activeClass+'">'+sortingArr[k]+"</a></li>"}var html=bcSfFilterTemplate.sortingHtml.replace(/{{sortingItems}}/g,
sortingItemsHtml);jQ(".bc-sf-filter-custom-sorting").html(html);if(jQ(".bc-sf-filter-custom-sorting").hasClass("bc-sf-filter-sort-active"))jQ(".bc-sf-filter-custom-sorting").toggleClass("bc-sf-filter-sort-active");var labelSort="";if(paramSort.length>0){var labelHandle="sorting_"+paramSort.replace(/\-/g,"_");labelSort=bcSfFilterConfig.label[labelHandle]}else labelSort=bcSfFilterConfig.label.sorting;jQ(".bc-sf-filter-custom-sorting label span span").text(labelSort)}}};
BCSfFilter.prototype.buildSortingEvent=function(){var _this=this;jQ(".bc-sf-filter-filter-dropdown a").click(function(e){e.preventDefault();onInteractWithToolbar(e,"sort",_this.queryParams.sort,jQ(this).data("sort"))});jQ(".bc-sf-filter-custom-sorting > label").click(function(){if(!jQ(".bc-sf-filter-filter-dropdown").is(":animated")){jQ(".bc-sf-filter-filter-dropdown").toggle().parent().toggleClass("bc-sf-filter-sort-active");jQ("#bc-sf-filter-tree").hide()}});jQ(this.getSelector("filterTreeMobileButton")).click(function(){jQ("#bc-sf-filter-top-sorting-mobile .bc-sf-filter-filter-dropdown").hide()})};
BCSfFilter.prototype.buildFilterDisplayType=function(){var itemHtml="<span>"+bcSfFilterConfig.label.toolbar_viewas+"</span>";itemHtml+='<a href="'+this.buildToolbarLink("display","list","grid")+'" title="Grid view" class="bc-sf-filter-display-item bc-sf-filter-display-grid" data-view="grid"><span class="icon-fallback-text"><i class="fa fa-th" aria-hidden="true"></i><span class="fallback-text">Grid view</span></span></a>';itemHtml+='<a href="'+this.buildToolbarLink("display","grid","list")+'" title="List view" class="bc-sf-filter-display-item bc-sf-filter-display-list" data-view="list"><span class="icon-fallback-text"><i class="fa fa-list" aria-hidden="true"></i><span class="fallback-text">List view</span></span></a>';
var topDisplayTypeSelector=jQ(this.getSelector("topDisplayType"));var listProductSelector=jQ(this.getSelector("products"));topDisplayTypeSelector.html(itemHtml);topDisplayTypeSelector.find(".bc-sf-filter-display-item").removeClass("active");if(this.queryParams.display=="list"){topDisplayTypeSelector.find(".bc-sf-filter-display-list").addClass("active");listProductSelector.removeClass("bc-sf-filter-grid-view-items").addClass("bc-sf-filter-list-view-items")}else if(this.queryParams.display=="grid"){topDisplayTypeSelector.find(".bc-sf-filter-display-grid").addClass("active");
listProductSelector.removeClass("bc-sf-filter-list-view-items").addClass("bc-sf-filter-grid-view-items")}};
BCSfFilter.prototype.buildDisplayTypeEvent=function(){var _this=this;var topDisplayTypeSelector=jQ(this.getSelector("topDisplayType"));var listProductSelector=jQ(this.getSelector("products"));jQ(this.getSelector("topDisplayType")+" a").click(function(e){e.preventDefault();_this.internalClick=true;jQ(this).parent().children().removeClass("active");jQ(this).addClass("active");if(_this.queryParams.display=="list"){topDisplayTypeSelector.find(".bc-sf-filter-display-list").addClass("active");listProductSelector.removeClass("bc-sf-filter-grid-view-items").addClass("bc-sf-filter-list-view-items")}else if(_this.queryParams.display==
"grid"){topDisplayTypeSelector.find(".bc-sf-filter-display-grid").addClass("active");listProductSelector.removeClass("bc-sf-filter-list-view-items").addClass("bc-sf-filter-grid-view-items")}var newUrl=jQ(this).attr("href");_this.onChangeData(newUrl,"display")})};
BCSfFilter.prototype.buildFilterShowLimit=function(){if(bcSfFilterConfig.custom.show_limit&&bcSfFilterTemplate.hasOwnProperty("showLimitHtml")){jQ(this.selector.topShowLimit).html("");var numberList=this.getSettingValue("general.showLimitList");if(numberList!=""){var showLimitItemsHtml="";var arr=numberList.split(",");for(var k=0;k<arr.length;k++)showLimitItemsHtml+='<option value="'+arr[k].trim()+'">'+arr[k].trim()+"</option>";var html=bcSfFilterTemplate.showLimitHtml.replace(/{{showLimitItems}}/g,
showLimitItemsHtml);jQ(this.selector.topShowLimit).html(html);jQ(this.selector.topShowLimit+" select").val(this.queryParams.limit)}}};
BCSfFilter.prototype.buildBreadcrumb=function(colData,apiData){if(bcSfFilterTemplate.hasOwnProperty("breadcrumbHtml")){var breadcrumbItemsHtml="";if(typeof colData!=="undefined"&&colData.hasOwnProperty("collection")){var colInfo=colData.collection;if(typeof this.collectionTags!=="undefined"&&this.collectionTags!==null){breadcrumbItemsHtml+=bcSfFilterTemplate.breadcrumbItemLink.replace(/{{itemLink}}/g,"/collections/"+colInfo.handle).replace(/{{itemTitle}}/g,colInfo.title);breadcrumbItemsHtml+=" {{breadcrumbDivider}} ";
breadcrumbItemsHtml+=bcSfFilterTemplate.breadcrumbItemSelected.replace(/{{itemTitle}}/g,this.collectionTags[0])}else breadcrumbItemsHtml+=bcSfFilterTemplate.breadcrumbItemSelected.replace(/{{itemTitle}}/g,colInfo.title)}else breadcrumbItemsHtml+=bcSfFilterTemplate.breadcrumbItemSelected.replace(/{{itemTitle}}/g,this.getSettingValue("label.defaultCollectionHeader"));var html=bcSfFilterTemplate.breadcrumbHtml.replace(/{{breadcrumbItems}}/g,breadcrumbItemsHtml);html=html.replace(/{{breadcrumbDivider}}/g,
bcSfFilterTemplate.breadcrumbDivider);jQ(this.selector.breadcrumb).html(html)}};function matchHeightImage(){jQ(".bc-sf-filter-product-item-main-image").load(function(){var imageContainer=jQ(this).parent();imageContainer.css("width","100%").css("height",$(this).height())}).each(function(){if(this.complete)jQ(this).load()})}
BCSfFilter.prototype.buildExtrasProductList=function(data,eventType){var self=this;var alEnable=true;if(self.getSettingValue("actionlist.qvEnable")!=""||self.getSettingValue("actionlist.atcEnable")!="")alEnable=self.getSettingValue("actionlist.qvEnable")||self.getSettingValue("actionlist.atcEnable");if(typeof Yotpo!=="undefined"){var api=new Yotpo.API(yotpo);api.refreshWidgets()}if(alEnable===true&&typeof BCActionList!=="undefined")if(typeof bcActionList==="undefined")bcActionList=new BCActionList;
else if(typeof bcAlParams!=="undefined"&&typeof bcSfFilterParams!=="undefined"){bcActionList.initFlag=false;bcActionList.alInit(bcSfFilterParams,bcAlParams)}else bcActionList.alInit();if(typeof theme!=="undefined"&&typeof theme.init==="function")$(theme.init)};
BCSfFilter.prototype.buildAdditionalElements=function(data,eventType){var _this=this;var totalProduct=data.total_product+"<span> "+bcSfFilterConfig.label.items_with_count_other+"</span>";if(data.total_product==1)totalProduct=data.total_product+"<span> "+bcSfFilterConfig.label.items_with_count_one+"</span>";jQ("#bc-sf-filter-total-product").html(totalProduct);matchHeightImage();jQ(window).resize(function(){matchHeightImage()});jQ("body").find(".bc-sf-filter-skeleton-button").remove();this.isMobile()&&
jQ(".bc-sf-filter-product-item").find("a").on("touchstart",function(){isScrolling=!1}).on("touchmove",function(){isScrolling=!0}).on("touchend",function(){isScrolling||(window.location=jQ(this).attr("href"))});(this.isMobile()||null!=navigator.userAgent.match(/iPad/i))&&(setTimeout(function(){jQ(".bc-sf-filter-product-item-image img").each(function(){var a=jQ(this).attr("src")+"3";jQ(this).attr("src",a)})},200),setTimeout(function(){jQ(".bc-sf-filter-product-item-image img").each(function(){var a=
jQ(this).attr("src")+"3";jQ(this).attr("src",a)})},2E3))};function buildDefaultLink(a,b){var c=window.location.href.split("?")[0];return c+="?"+a+"="+b}
BCSfFilter.prototype.buildDefaultElements=function(a){if(bcSfFilterConfig.general.hasOwnProperty("collection_count")&&jQ("#bc-sf-filter-bottom-pagination").length>0){var b=bcSfFilterConfig.general.collection_count,c=parseInt(this.queryParams.page),d=Math.ceil(b/this.queryParams.limit);if(1==d)return jQ(this.selector.pagination).html(""),!1;if("default"==this.getSettingValue("general.paginationType")){var e=bcSfFilterTemplate.paginateHtml,f="";f=c>1?bcSfFilterTemplate.hasOwnProperty("previousActiveHtml")?
bcSfFilterTemplate.previousActiveHtml:bcSfFilterTemplate.previousHtml:bcSfFilterTemplate.hasOwnProperty("previousDisabledHtml")?bcSfFilterTemplate.previousDisabledHtml:"",f=f.replace(/{{itemUrl}}/g,buildDefaultLink("page",c-1)),e=e.replace(/{{previous}}/g,f);var g="";g=c<d?bcSfFilterTemplate.hasOwnProperty("nextActiveHtml")?bcSfFilterTemplate.nextActiveHtml:bcSfFilterTemplate.nextHtml:bcSfFilterTemplate.hasOwnProperty("nextDisabledHtml")?bcSfFilterTemplate.nextDisabledHtml:"",g=g.replace(/{{itemUrl}}/g,
buildDefaultLink("page",c+1)),e=e.replace(/{{next}}/g,g);for(var h=[],i=c-1;i>c-3&&i>0;i--)h.unshift(i);c-4>0&&h.unshift("..."),c-4>=0&&h.unshift(1),h.push(c);for(var j=[],k=c+1;k<c+3&&k<=d;k++)j.push(k);c+3<d&&j.push("..."),c+3<=d&&j.push(d);for(var l="",m=h.concat(j),n=0;n<m.length;n++)"..."==m[n]?l+=bcSfFilterTemplate.pageItemRemainHtml:l+=m[n]==c?bcSfFilterTemplate.pageItemSelectedHtml:bcSfFilterTemplate.pageItemHtml,l=l.replace(/{{itemTitle}}/g,m[n]),l=l.replace(/{{itemUrl}}/g,buildDefaultLink("page",
m[n]));e=e.replace(/{{pageItems}}/g,l),jQ(this.selector.pagination).html(e)}}if(bcSfFilterTemplate.hasOwnProperty("sortingHtml")&&jQ(this.selector.topSorting).length>0){jQ(this.selector.topSorting).html("");var o=this.getSortingList();if(o){var p="";for(var q in o)p+='<option value="'+q+'">'+o[q]+"</option>";var r=bcSfFilterTemplate.sortingHtml.replace(/{{sortingItems}}/g,p);jQ(this.selector.topSorting).html(r);var s=void 0!==this.queryParams.sort_by?this.queryParams.sort_by:this.defaultSorting;jQ(this.selector.topSorting+
" select").val(s),jQ(this.selector.topSorting+" select").change(function(a){window.location.href=buildDefaultLink("sort_by",jQ(this).val())})}}};
BCSfFilter.prototype.prepareProductData=function(data){var countData=data.length;for(var k=0;k<countData;k++){data[k]["images"]=data[k]["images_info"];if(data[k]["images"].length>0)data[k]["featured_image"]=data[k]["images"][0];else data[k]["featured_image"]={src:bcSfFilterConfig.general.no_image_url,width:"",height:"",aspect_ratio:0};data[k]["url"]="/products/"+data[k].handle;var optionsArr=[];var countOptionsWithValues=data[k]["options_with_values"].length;for(var i=0;i<countOptionsWithValues;i++)optionsArr.push(data[k]["options_with_values"][i]["name"]);
data[k]["options"]=optionsArr;if(typeof bcSfFilterConfig.general.currencies!="undefined"&&bcSfFilterConfig.general.currencies.length>1){var updateMultiCurrencyPrice=function(oldPrice,newPrice){if(typeof newPrice!="undefined")return newPrice;return oldPrice};var currentCurrency=bcSfFilterConfig.general.current_currency.toLowerCase().trim();data[k].price_min=updateMultiCurrencyPrice(data[k].price_min,data[k]["price_min_"+currentCurrency]);data[k].price_max=updateMultiCurrencyPrice(data[k].price_max,
data[k]["price_max_"+currentCurrency]);data[k].compare_at_price_min=updateMultiCurrencyPrice(data[k].compare_at_price_min,data[k]["compare_at_price_min_"+currentCurrency]);data[k].compare_at_price_max=updateMultiCurrencyPrice(data[k].compare_at_price_max,data[k]["compare_at_price_max_"+currentCurrency])}data[k]["price_min"]*=100,data[k]["price_max"]*=100,data[k]["compare_at_price_min"]*=100,data[k]["compare_at_price_max"]*=100;data[k]["price"]=data[k]["price_min"];data[k]["compare_at_price"]=data[k]["compare_at_price_min"];
data[k]["price_varies"]=data[k]["price_min"]!=data[k]["price_max"];var firstVariant=data[k]["variants"][0];if(getParam("variant")!==null&&getParam("variant")!=""){var paramVariant=data.variants.filter(function(e){return e.id==getParam("variant")});if(typeof paramVariant[0]!=="undefined")firstVariant=paramVariant[0]}else{var countVariants=data[k]["variants"].length;for(var i=0;i<countVariants;i++)if(data[k]["variants"][i].available){firstVariant=data[k]["variants"][i];break}}data[k]["selected_or_first_available_variant"]=
firstVariant;var countVariants=data[k]["variants"].length;for(var i=0;i<countVariants;i++){var variantOptionArr=[];var count=1;var variant=data[k]["variants"][i];var variantOptions=variant["merged_options"];if(Array.isArray(variantOptions)){var countVariantOptions=variantOptions.length;for(var j=0;j<countVariantOptions;j++){var temp=variantOptions[j].split(":");data[k]["variants"][i]["option"+(parseInt(j)+1)]=temp[1];data[k]["variants"][i]["option_"+temp[0]]=temp[1];variantOptionArr.push(temp[1])}data[k]["variants"][i]["options"]=
variantOptionArr}data[k]["variants"][i]["compare_at_price"]=parseFloat(data[k]["variants"][i]["compare_at_price"])*100;data[k]["variants"][i]["price"]=parseFloat(data[k]["variants"][i]["price"])*100}data[k]["description"]=data[k]["content"]=data[k]["body_html"];if(data[k].hasOwnProperty("original_tags")&&data[k]["original_tags"].length>0)data[k].tags=data[k]["original_tags"].slice(0)}return data};
BCSfFilter.prototype.getFilterData=function(eventType,errorCount){function BCSend(eventType,errorCount){var self=bcsffilter;var errorCount=typeof errorCount!=="undefined"?errorCount:0;self.showLoading();if(typeof self.buildPlaceholderProductList=="function")self.buildPlaceholderProductList(eventType);self.beforeGetFilterData(eventType);self.prepareRequestParams(eventType);self.queryParams["callback"]="BCSfFilterCallback";self.queryParams["event_type"]=eventType;var url=self.isSearchPage()?self.getApiUrl("search"):
self.getApiUrl("filter");var script=document.createElement("script");script.type="text/javascript";var timestamp=(new Date).getTime();script.src=url+"?t="+timestamp+"&"+jQ.param(self.queryParams);script.id="bc-sf-filter-script";script.async=true;var resendAPITimer,resendAPIDuration;resendAPIDuration=2E3;script.addEventListener("error",function(e){if(typeof document.getElementById(script.id).remove=="function")document.getElementById(script.id).remove();else document.getElementById(script.id).outerHTML=
"";if(errorCount<3){errorCount++;if(resendAPITimer)clearTimeout(resendAPITimer);resendAPITimer=setTimeout(self.getFilterData("resend",errorCount),resendAPIDuration)}else self.buildDefaultElements(eventType)});document.getElementsByTagName("head")[0].appendChild(script);script.onload=function(){if(typeof document.getElementById(script.id).remove=="function")document.getElementById(script.id).remove();else document.getElementById(script.id).outerHTML=""}}this.requestFilter(BCSend,eventType,errorCount)};
BCSfFilter.prototype.requestFilter=function(sendFunc,eventType,errorCount){sendFunc(eventType,errorCount)};
BCSfFilter.prototype.buildFilterOptionItem=function(html,iLabel,iValue,fOType,fOId,fOLabel,fODisplayType,fOSelectType,fOItemValue,fOData){var keepValuesStatic=fOData.hasOwnProperty("keepValuesStatic")?fOData.keepValuesStatic:false;if(fOType=="review_ratings"&&this.getSettingValue("general.ratingSelectionStyle")=="text")var title=this.getReviewRatingsLabel(fOItemValue.from);else var title=this.customizeFilterOptionLabel(iLabel,fOData.prefix,fOType);if(keepValuesStatic===true)var productNumber=null;
else var productNumber=fOItemValue.hasOwnProperty("doc_count")?fOItemValue.doc_count:0;html=html.replace(/{{itemLabel}}/g,this.buildFilterOptionLabel(iLabel,productNumber,fOData));html=html.replace(/{{itemLink}}/g,this.buildFilterOptionLink(fOId,iValue,fOType,fODisplayType,fOSelectType,keepValuesStatic));html=html.replace(/{{itemValue}}/g,encodeURIParamValue(iValue));html=html.replace(/{{itemTitle}}/g,title);html=html.replace(/{{itemFunc}}/g,"onInteractWithFilterOptionValue(event, this, '"+fOType+
"', '"+fODisplayType+"', '"+fOSelectType+"', '"+keepValuesStatic+"')");html=this.checkFilterOptionSelected(fOId,iValue,fOType,fODisplayType)?html.replace(/{{itemSelected}}/g,"selected"):html.replace(/{{itemSelected}}/g,"");var htmlElement=jQ(html);htmlElement.children().attr({"data-id":fOId,"data-value":encodeURIParamValue(iValue),"data-parent-label":fOLabel,"data-title":title,"data-count":productNumber});if(fOType!="collection")htmlElement.children().attr("rel","nofollow");if(fOType=="collection")htmlElement.children().attr("data-collection-scope",
fOItemValue.key);return jQ(htmlElement)[0].outerHTML};